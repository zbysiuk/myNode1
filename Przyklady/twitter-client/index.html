<!DOCTYPE html>
<html>
    <head>
        <!-- Publiczny strumień Twittera
             Na podstawie przykładu do tutoriala:
             http://net.tutsplus.com/tutorials/javascript-ajax/learning-serverside-javascript-with-node-js/
        -->
        <title>Tweet Streamer</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    </head>
    <body>
        <ul id="tweets"></ul>
	<script type="text/javascript">
	    var tweet_list = $("#tweets");
		
	    function load_tweets() {
	        $.getJSON("/stream", function(tweets) {
		    $.each(tweets, function() {
		        $("<li>").html("<img src=\"" + this.user.profile_image_url + "\" alt=\"Profile image\"><br><b>" + this.user.name + "</b>: " + this.text + "<br><br>").prependTo(tweet_list);
		    });
		    load_tweets();
		});
	    }
		
	    setTimeout(load_tweets, 1000);
	</script>
    </body>
</html>
